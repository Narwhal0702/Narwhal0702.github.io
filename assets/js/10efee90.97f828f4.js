"use strict";(self.webpackChunkpage_editor_document=self.webpackChunkpage_editor_document||[]).push([[243],{3905:(e,a,t)=>{t.d(a,{Zo:()=>p,kt:()=>m});var l=t(7294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function n(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);a&&(l=l.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,l)}return t}function c(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?n(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function o(e,a){if(null==e)return{};var t,l,r=function(e,a){if(null==e)return{};var t,l,r={},n=Object.keys(e);for(l=0;l<n.length;l++)t=n[l],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(l=0;l<n.length;l++)t=n[l],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var k=l.createContext({}),i=function(e){var a=l.useContext(k),t=a;return e&&(t="function"==typeof e?e(a):c(c({},a),e)),t},p=function(e){var a=i(e.components);return l.createElement(k.Provider,{value:a},e.children)},u={inlineCode:"code",wrapper:function(e){var a=e.children;return l.createElement(l.Fragment,{},a)}},s=l.forwardRef((function(e,a){var t=e.components,r=e.mdxType,n=e.originalType,k=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),s=i(t),m=r,g=s["".concat(k,".").concat(m)]||s[m]||u[m]||n;return t?l.createElement(g,c(c({ref:a},p),{},{components:t})):l.createElement(g,c({ref:a},p))}));function m(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var n=t.length,c=new Array(n);c[0]=s;var o={};for(var k in a)hasOwnProperty.call(a,k)&&(o[k]=a[k]);o.originalType=e,o.mdxType="string"==typeof e?e:r,c[1]=o;for(var i=2;i<n;i++)c[i]=t[i];return l.createElement.apply(null,c)}return l.createElement.apply(null,t)}s.displayName="MDXCreateElement"},8765:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>k,contentTitle:()=>c,default:()=>u,frontMatter:()=>n,metadata:()=>o,toc:()=>i});var l=t(7462),r=(t(7294),t(3905));const n={title:"Block API"},c=void 0,o={unversionedId:"api/blocks_api",id:"api/blocks_api",title:"Block API",description:"API",source:"@site/docs/api/blocks_api.mdx",sourceDirName:"api",slug:"/api/blocks_api",permalink:"/docs/api/blocks_api",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/api/blocks_api.mdx",tags:[],version:"current",frontMatter:{title:"Block API"},sidebar:"api",previous:{title:"Store API",permalink:"/docs/api/store_api"},next:{title:"\u6570\u636e\u7ed3\u6784\u4e0e\u5e38\u91cf\u7684\u5b9a\u4e49",permalink:"/docs/api/data_structure_interface"}},k={},i=[{value:"API",id:"api",level:2},{value:"Block\u7ba1\u7406\u5668(BlockManager)",id:"block\u7ba1\u7406\u5668blockmanager",level:3},{value:"BlockManager.getBlocks()",id:"blockmanagergetblocks",level:3},{value:"BlockManager.createIdx()",id:"blockmanagercreateidx",level:3},{value:"BlockManager.createBlockData()",id:"blockmanagercreateblockdata",level:3},{value:"BlockManager.createBlock()",id:"blockmanagercreateblock",level:3},{value:"BlockManager.createCustomBlock()",id:"blockmanagercreatecustomblock",level:3},{value:"BlockManager.registerBlocks()",id:"blockmanagerregisterblocks",level:3},{value:"BlockManager.getBlockByType()",id:"blockmanagergetblockbytype",level:3},{value:"BlockManager.getBlocksByType()",id:"blockmanagergetblocksbytype",level:3},{value:"BlockManager.renderPage()",id:"blockmanagerrenderpage",level:3}],p={toc:i};function u(e){let{components:a,...t}=e;return(0,r.kt)("wrapper",(0,l.Z)({},p,t,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"api"},"API"),(0,r.kt)("h3",{id:"block\u7ba1\u7406\u5668blockmanager"},"Block\u7ba1\u7406\u5668(BlockManager)"),(0,r.kt)("h3",{id:"blockmanagergetblocks"},"BlockManager.getBlocks()"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7c7b\u578b: ",(0,r.kt)("inlineCode",{parentName:"li"},"Array<IBlock>")),(0,r.kt)("li",{parentName:"ul"},"\u7528\u6cd5: ",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const blocksMap = BlockManager.getBlocks()\n"))),(0,r.kt)("li",{parentName:"ul"},"\u8be6\u7ec6: \u83b7\u53d6\u6240\u6709\u7684Blocks\u5217\u8868")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"blockmanagercreateidx"},"BlockManager.createIdx()"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7c7b\u578b: ",(0,r.kt)("inlineCode",{parentName:"li"},"(blockType: string): string")),(0,r.kt)("li",{parentName:"ul"},"\u7528\u6cd5: ",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const parentIdx = createIdx(block.type);\n"))),(0,r.kt)("li",{parentName:"ul"},"\u8be6\u7ec6: \u8fd4\u56de\u4e00\u4e2ablockType\u62fc\u63a5uuid\u7684\u968f\u673a\u5b57\u7b26\u4e32\u4f5c\u4e3a\u4e00\u4e2a\u968f\u673a\u4e0d\u53ef\u91cd\u590d\u7684blockID")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"blockmanagercreateblockdata"},"BlockManager.createBlockData()"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7c7b\u578b: ",(0,r.kt)("inlineCode",{parentName:"li"},"(payload: IBlockTree): IBlockTreeWithId")),(0,r.kt)("li",{parentName:"ul"},"\u7528\u6cd5: ",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},' const defaultData: IBlockTree = {\n    type: PageBuilderBlocks.ACCORDION,\n    data: {\n      value: {\n        currentIndex: -1,\n        columnList: [\n          {\n            textHeader: "Accordion item",\n            textDescription:\n              \'<p style="font-size: 16px; line-height: 1.5;">Accordion content</p>\',\n            columnId: uuidv4(),\n          },\n        ],\n      },\n    },\n    styles: {},\n  };\n  const blockData = BlockManager.createBlockData({\n    ...defaultData,\n  });\n'))),(0,r.kt)("li",{parentName:"ul"},"\u8be6\u7ec6: \u521b\u5efa\u4e00\u4e2aBlock\u7684\u6570\u636e,\u5982\u679cBlock\u5305\u542b\u5305\u542bchildren\u5185\u5bb9,\u5c06children\u904d\u5386\u586b\u5145\u81f3children\u6570\u7ec4\u4e2d")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"blockmanagercreateblock"},"BlockManager.createBlock()"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7c7b\u578b: ",(0,r.kt)("inlineCode",{parentName:"li"},"<T extends ExtendedBlockData>( block: CreateBlockOption<T> ): () => IBlock")),(0,r.kt)("li",{parentName:"ul"},"\u7528\u6cd5: ",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},""))),(0,r.kt)("li",{parentName:"ul"},"\u8be6\u7ec6: ")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"blockmanagercreatecustomblock"},"BlockManager.createCustomBlock()"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7c7b\u578b: ",(0,r.kt)("inlineCode",{parentName:"li"},"<T extends ExtendedBlockData>( block: IBlock<T> ): IBlock<T>")),(0,r.kt)("li",{parentName:"ul"},"\u7528\u6cd5: ",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},""))),(0,r.kt)("li",{parentName:"ul"},"\u8be6\u7ec6: ")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"blockmanagerregisterblocks"},"BlockManager.registerBlocks()"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7c7b\u578b: ",(0,r.kt)("inlineCode",{parentName:"li"},"blocksMap: { [key: string]: IBlock }")),(0,r.kt)("li",{parentName:"ul"},"\u7528\u6cd5: ",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const map: Record<string, any> = {...};\nBlockManager.registerBlocks(map);\n"))),(0,r.kt)("li",{parentName:"ul"},"\u8be6\u7ec6: \u5c06\u4f20\u53c2\u4e2d\u7684\u6570\u636e\u4e8eBlock Manger\u4e2d\u5df2\u5b58\u5728\u7684BlockMap\u5408\u5e76,\u5e76\u5c06\u503c\u8986\u76d6")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"blockmanagergetblockbytype"},"BlockManager.getBlockByType()"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7c7b\u578b: ",(0,r.kt)("inlineCode",{parentName:"li"},"(type: string): IBlock")),(0,r.kt)("li",{parentName:"ul"},"\u7528\u6cd5: ",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"BlockManager.getBlockByType(BasicHtmlType.TEXT)\n"))),(0,r.kt)("li",{parentName:"ul"},"\u8be6\u7ec6: \u62ff\u5230Block\u5217\u8868\u4e2d\u5bf9\u5e94\u8be5type\u7684\u7b2c\u4e00\u4e2aBlock")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"blockmanagergetblocksbytype"},"BlockManager.getBlocksByType()"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7c7b\u578b: ",(0,r.kt)("inlineCode",{parentName:"li"},"( types: Array<string> ): Array<IBlock | undefined>")),(0,r.kt)("li",{parentName:"ul"},"\u7528\u6cd5: ",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"}," BlockManager.getBlocksByType(BasicHtmlType.TEXT)\n"))),(0,r.kt)("li",{parentName:"ul"},"\u8be6\u7ec6: \u62ff\u5230Block\u5217\u8868\u4e2d\u5bf9\u5e94\u8be5type\u7684\u6240\u6709Block")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"blockmanagerrenderpage"},"BlockManager.renderPage()"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7c7b\u578b: ``"),(0,r.kt)("li",{parentName:"ul"},"\u7528\u6cd5: ",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},""))),(0,r.kt)("li",{parentName:"ul"},"\u8be6\u7ec6:")))}u.isMDXComponent=!0}}]);